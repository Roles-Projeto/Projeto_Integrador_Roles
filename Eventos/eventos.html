<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eventos | Rolê.AI</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../css/eventos.css">
</head>

<body>
<header>
    <iframe id="site-header" src="../header/header.html" frameborder="0" scrolling="no" width="100%"
        height="200" style="position: fixed; top: 0; left: 0; z-index: 999999999;"></iframe>
</header>

    <section class="hero-section">
        <div class="content-wrapper">
            <h1>Todos os Eventos</h1>
            <p>Encontre os eventos mais incríveis acontecendo na sua cidade</p>

            <div class="search-bar">
                <i class="fas fa-search search-icon" aria-hidden="true"></i>
                <input id="searchInput" type="text" placeholder="Buscar eventos, locais, artistas..."
                    aria-label="Buscar eventos">
            </div>
        </div>
    </section>

    <section class="filtros-container">
        <div class="filtros-box">
            <div class="filtros-esquerda">
                <i class="fa-solid fa-filter"></i>
                <span>Filtros</span>
            </div>

            <div class="filtros-direita">
                <select id="dataFiltro" aria-label="Filtrar por data">
                    <option value="todas">Todas as datas</option>
                    <option value="hoje">Hoje</option>
                    <option value="amanha">Amanhã</option>
                    <option value="semana">Esta semana</option>
                    <option value="mes">Este mês</option>
                </select>

                <select id="categoriaFiltro" aria-label="Filtrar por categoria">
                    <option value="todas">Todas as categorias</option>
                    <option value="festa">Festa</option>
                    <option value="show">Show</option>
                    <option value="festival">Festival</option>
                    <option value="gastronomia">Gastronomia</option>
                    <option value="workshop">Workshop</option>
                </select>

                <select id="ordenarPor" aria-label="Ordenar por">
                    <option value="data">Data do evento</option>
                    <option value="populares">Mais populares</option>
                    <option value="nome">Nome A-Z</option>
                    <option value="preco">Preço</option>
                </select>
            </div>
        </div>

        <div class="filtros-meta">
            <div class="encontrados" id="contadorEventos">
                Encontrados <strong id="qtdEventos">6</strong> eventos
            </div>

            <div class="pills" id="pillsContainer">
                <button class="pill active" data-cat="todas">Todos</button>
                <button class="pill" data-cat="festa">Festas</button>
                <button class="pill" data-cat="show">Shows</button>
                <button class="pill" data-cat="festival">Festivais</button>
                <button class="pill" data-cat="gastronomia">Gastronomia</button> </div>
        </div>
    </section>


    <main class="eventos-lista" id="eventosContainer" aria-live="polite">
        <article class="evento-card" data-categoria="happy hour" data-nome="Happy Hour Especial">
            <div class="evento-imagem">
                <img src="../Imagens/7º imagem card.png" alt="Happy Hour Especial" />
                <span class="badge">Happy Hour</span>
            </div>
            <div class="evento-info">
                <h3>Happy Hour Especial</h3>
                <p class="descricao">Drinks especiais com vista panorâmica da cidade. DJ ao vivo e promoções
                    imperdíveis!</p>
                <p class="meta"><i class="fa-regular fa-calendar"></i> sex., 31 de jan. &nbsp; <i
                        class="fa-regular fa-clock"></i> 18:00</p>
                <p class="meta"><i class="fa-solid fa-location-dot"></i> Sky Bar Rooftop, Setor Bueno</p>
                <p class="meta"><i class="fa-regular fa-user"></i> 80 pessoas interessadas</p>

                <div class="card-footer">
                    <span class="preco">Entrada Gratuita <small class="taxa"></small></span>
                    <div class="acoes">
                        <button class="btn-detalhes">Mais Detalhes</button>
                        <button class="btn-confirmar">Confirmar Presença</button>
                    </div>
                </div>
            </div>
        </article>

        <article class="evento-card" data-categoria="festa" data-nome="Noite da Salsa">
            <div class="evento-imagem">
                <img src="../Imagens/8º imagem card.png" alt="Noite da Salsa" />
                <span class="badge">Dança</span>
            </div>
            <div class="evento-info">
                <h3>Noite da Salsa</h3>
                <p class="descricao">Aulas gratuitas seguidas de muita dança e diversão. Para todos os níveis!</p>
                <p class="meta"><i class="fa-regular fa-calendar"></i> dom., 2 de fev. &nbsp; <i
                        class="fa-regular fa-clock"></i> 21:00</p>
                <p class="meta"><i class="fa-solid fa-location-dot"></i> Club Latino, Setor Oeste</p>
                <p class="meta"><i class="fa-regular fa-user"></i> 120 pessoas interessadas</p>

                <div class="card-footer">
                    <span class="preco">R$ 30 <small class="taxa">+ 10% taxa</small></span>
                    <div class="acoes">
                        <button class="btn-detalhes">Mais Detalhes</button>
                        <button class="btn-confirmar">Confirmar Presença</button>
                    </div>
                </div>
            </div>
        </article>

        <article class="evento-card" data-categoria="gastronomia" data-nome="Degustação de Vinhos">
            <div class="evento-imagem">
                <img src="../Imagens/9º imagem card.png" alt="Degustação de Vinhos" />
                <span class="badge">Gastronomia</span>
            </div>
            <div class="evento-info">
                <h3>Degustação de Vinhos</h3>
                <p class="descricao">Seleção especial de vinhos com sommelier profissional. Harmonização com queijos e
                    petiscos.</p>
                <p class="meta"><i class="fa-regular fa-calendar"></i> ter., 4 de fev. &nbsp; <i
                        class="fa-regular fa-clock"></i> 19:30</p>
                <p class="meta"><i class="fa-solid fa-location-dot"></i> Wine & Bistro, Setor Marista</p>
                <p class="meta"><i class="fa-regular fa-user"></i> 40 pessoas interessadas</p>

                <div class="card-footer">
                    <span class="preco">R$ 80 <small class="taxa">+ 10% taxa</small></span>
                    <div class="acoes">
                        <button class="btn-detalhes">Mais Detalhes</button>
                        <button class="btn-confirmar">Confirmar Presença</button>
                    </div>
                </div>
            </div>
        </article>

        <article class="evento-card" data-categoria="gastronomia" data-nome="Brunch de Domingo">
            <div class="evento-imagem">
                <img src="../Imagens/10º imagem card.png" alt="Brunch de Domingo" />
                <span class="badge">Gastronomia</span>
            </div>
            <div class="evento-info">
                <h3>Brunch de Domingo</h3>
                <p class="descricao">Brunch especial com produtos frescos e atmosfera relaxante. Buffet completo!</p>
                <p class="meta"><i class="fa-regular fa-calendar"></i> sáb., 8 de fev. &nbsp; <i
                        class="fa-regular fa-clock"></i> 10:00</p>
                <p class="meta"><i class="fa-solid fa-location-dot"></i> Café da Manhã, Setor Sul</p>
                <p class="meta"><i class="fa-regular fa-user"></i> 60 pessoas interessadas</p>

                <div class="card-footer">
                    <span class="preco">R$ 42 <small class="taxa">+ 10% taxa</small></span>
                    <div class="acoes">
                        <button class="btn-detalhes">Mais Detalhes</button>
                        <button class="btn-confirmar">Confirmar Presença</button>
                    </div>
                </div>
            </div>
        </article>

        <article class="evento-card" data-categoria="show" data-nome="Show de Rock Nacional">
            <div class="evento-imagem">
                <img src="../Imagens/11º imagem card.png" alt="Show de Rock Nacional" />
                <span class="badge">Música</span>
            </div>
            <div class="evento-info">
                <h3>Show de Rock Nacional</h3>
                <p class="descricao">Bandas nacionais em uma noite inesquecível de rock. Line-up completo com 4 bandas!
                </p>
                <p class="meta"><i class="fa-regular fa-calendar"></i> dom., 9 de fev. &nbsp; <i
                        class="fa-regular fa-clock"></i> 22:00</p>
                <p class="meta"><i class="fa-solid fa-location-dot"></i> Club Underground, Setor Oeste</p>
                <p class="meta"><i class="fa-regular fa-user"></i> 300 pessoas interessadas</p>

                <div class="card-footer">
                    <span class="preco">A partir de R$ 35 <small class="taxa">+ 10% taxa</small></span>
                    <div class="acoes">
                        <button class="btn-detalhes">Mais Detalhes</button>
                        <button class="btn-confirmar">Confirmar Presença</button>
                    </div>
                </div>
            </div>
        </article>

        <article class="evento-card" data-categoria="festival" data-nome="Festival de Jazz ao Ar Livre">
            <div class="evento-imagem">
                <img src="../Imagens/12º imagem card.png" alt="Festival de Jazz ao Ar Livre" />
                <span class="badge">Música</span>
            </div>
            <div class="evento-info">
                <h3>Festival de Jazz ao Ar Livre</h3>
                <p class="descricao">Uma noite mágica com os melhores músicos de jazz da cidade. Food trucks e muito
                    mais!</p>
                <p class="meta"><i class="fa-regular fa-calendar"></i> sex., 14 de fev. &nbsp; <i
                        class="fa-regular fa-clock"></i> 20:00</p>
                <p class="meta"><i class="fa-solid fa-location-dot"></i> Parque Areião, Goiânia</p>
                <p class="meta"><i class="fa-regular fa-user"></i> 250 pessoas interessadas</p>

                <div class="card-footer">
                    <span class="preco">A partir de R$ 35 <small class="taxa">+ 10% taxa</small></span>
                    <div class="acoes">
                        <button class="btn-detalhes">Mais Detalhes</button>
                        <button class="btn-confirmar">Confirmar Presença</button>
                    </div>
                </div>
            </div>
        </article>
    </main>

    <div class="carregar-container">
        <button id="carregarMais" class="btn-carregar">Carregar mais eventos</button>
    </div>

    <section class="estatisticas">
        <div class="item">
            <i class="fa-solid fa-calendar-check" aria-hidden="true"></i>
            <p>6+<br><span>Eventos cadastrados</span></p>
        </div>
        <div class="item">
            <i class="fa-solid fa-clock-rotate-left" aria-hidden="true"></i>
            <p>24/7<br><span>Atualizações constantes</span></p>
        </div>
        <div class="item">
            <i class="fa-solid fa-unlock-keyhole" aria-hidden="true"></i>
            <p>Grátis<br><span>Acesso às informações</span></p>
        </div>
    </section>

    <footer>
        <iframe src="../footer/footer.html" frameborder="0" scrolling="no" width="100%" height="auto"></iframe>
    </footer>

    <script>
        /* ==================================================
        // --- LÓGICA DE EVENTOS (Filtros e Contador) ---
        ================================================== */

        // Função para atualizar o contador de eventos visíveis
        function atualizarContador() {
            // Conta quantos cards estão com display: flex (visíveis)
            const eventosVisiveis = document.querySelectorAll('.evento-card[style*="flex"]').length;
            
            // Atualiza o texto no elemento <strong>
            document.getElementById('qtdEventos').textContent = eventosVisiveis;

            // Para o caso inicial onde style não está setado, conte todos
            if (eventosVisiveis === 0) {
                 const todosEventos = document.querySelectorAll('.evento-card').length;
                 const activePill = document.querySelector('.pill.active');
                 if (activePill && activePill.getAttribute('data-cat') === 'todas') {
                     document.getElementById('qtdEventos').textContent = todosEventos;
                 }
            }
        }
        
        const pillsContainer = document.getElementById('pillsContainer');
        if (pillsContainer) {
            // Inicializa o contador (apenas se o container existir)
            atualizarContador(); 
            
            // Adiciona MutationObserver: monitora mudanças de estilo/elementos para atualizar o contador
            const observer = new MutationObserver(() => atualizarContador());
            observer.observe(document.getElementById('eventosContainer'), { childList: true, subtree: true, attributes: true, attributeFilter: ['style'] });
            
            // Adiciona o listener de clique para os filtros
            pillsContainer.addEventListener('click', (e) => {
                if (!e.target.matches('.pill')) return;

                document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
                e.target.classList.add('active');

                const cat = e.target.getAttribute('data-cat');
                const cards = document.querySelectorAll('.evento-card');

                cards.forEach(card => {
                    if (cat === 'todas') {
                        // Se for "Todas", mostra todos os cards
                        card.style.display = 'flex';
                        return;
                    }
                    
                    const cardCat = (card.getAttribute('data-categoria') || '').toLowerCase();
                    
                    // CORREÇÃO AQUI: Troca de includes() para correspondência exata (===)
                    card.style.display = cardCat === cat ? 'flex' : 'none'; 
                });

                // O MutationObserver irá chamar o atualizarContador(), 
                // mas podemos chamar manualmente para garantir
                atualizarContador(); 
            });
        }
    </script>
</body>

</html>